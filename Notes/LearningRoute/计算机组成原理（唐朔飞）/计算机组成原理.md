![1555913999747](1555913999747.png)

![1554723227104](1554723227104.png)

# 第1章 计算机系统概论

## 1.1 计算机系统简介

### 1.1.1 计算机的软硬件概念

#### 1. 计算机系统

![1555914167439](1555914167439-1609090982013.png)

- 软件

  ![1555914196168](1555914196168-1609091007327.png)

- 语言处理程序分类

  - 汇编程序：将汇编语言程序翻译成对应的目标程序。

  - 编译程序：将高级语言程序翻译成对应的目标程序。

  - 解释程序：对高级语言程序逐句地进行翻译，产生对应的机器语言指令序列并执行。

  - 链接程序（Linker）：将一个或多个目标程序与一个或多个相关的程序库（Library）组织在一起，产生可执行代码，并存入外存，在需要运行时再由操作系统加载后执行。

  - 程序编译执行过程

    编译－链接－加载－执行

    ![1555914222309](1555914222309.png)

#### 2. 计算机的解题过程

![1554367070458](1554367070458.png)

### 1.1.2 计算机系统的层次结构

![1554434714866](1554434714866.png)

![1554367307119](1554367307119.png)

### 1.1.3 计算机体系结构和计算机组成

![1554367809964](1554367809964.png)

## *1.2 计算机的基本组成

### 1.2.1 冯诺依曼计算机的特点

1. 计算机由五大部件组成：运算器、控制器、存储器、输入设备、输出设备。

2. 指令和数据以同等地位存于存储器，可按地址寻访。

3. 指令和数据用二进制表示。

4. 指令由操作码和地址码组成。操作码用来表示操作的性质，地址码用来表示操作数在存储器中的位置。

5. 存储程序。指令在存储器内按顺序存放。

6. 以运算器为中心。

   ![1554368315517](1554368315517.png)

### 1.2.2 改进冯诺依曼计算机

1. 以存储器为中心的计算机：

   ![1554368372903](1554368372903.png)

   运算器：用来完成算术运算和逻辑运算，并将中间结果暂存其中。

   存储器：存放数据和程序。

   控制器：用来控制、指挥程序和数据的输入、运行以及处理运算结果。

   输入设备：将人们熟悉的信息形式转化为机器能识别的信息形式，常见的有键盘、鼠标。

   输出设备：将机器运算结果转换为人们熟悉的信息形式，如打印机输出、显示器输出等。

2. 现代计算机以存储器为中心。

   现代计算机：

   ![1554368751405](1554368751405.png)

   1. 系统复杂性管理的方法-2（3'Y）
      - 层次化（Hierarchy）: 将被设计的系统划分为多个模块或子模块。
      - 模块化（Modularity）: 有明确定义的功能和接口。
      - 规则性（regularity）: 模块更容易被重用。

### 1.2.3 计算机的工作步骤

#### 1. 上机前的准备

1.  建立数学模型
2.  确定计算方法
3.  编制解题程序
    - 程序：运算的全部步骤
    - 指令：每一个步骤

操作码：表示机器所执行的各种操作，如取数、存数、加、减、乘、除、停机、打印等。

地址码：表示参加运算的数在存储器内的位置。

指令=操作码+地址码

![image-20201228145622814](image-20201228145622814.png)

![image-20201228145802161](image-20201228145802161.png)

#### 2. 计算机的解题过程

![1554432335649](1554432335649.png)

##### 2.1 存储器的基本组成

![1554433065884](1554433065884.png)

MAR(存储器地址寄存器)：存储器地址寄存器，反映存储单元个数。

MDR(存储器数据寄存器)：存储器数据寄存器，反映存储字长。

存储单元：用于存放一串二进制代码。（用于存放一个存储字的所有存储元集合）

存储字：存储单元中二进制代码的组合。（存放在一个存储单元中的二进制代码组合）

存储字长：存储单元中二进制代码的位数。（存放在一个存储单元中的二进制代码位数）

存储容量：存储器内二进制信息的位数。

每个存储单元赋予一个地址号，按**地址寻访**。

![1554433844819](1554433844819.png)

##### 2.2 运算器的基本组成及操作过程

核心功能：完成运算

核心元件：ALU

![1554434870836](1554434870836.png)

ACC(累加器)

MQ(乘商寄存器)

X(操作数寄存器)

##### 2.3 控制器的基本组成

 功能：控制指令的读出、解释和执行，中断事件的处理等 。

- 组成：

  ① 指令部件： **程序计数器PC**---提供要执行的指令地址；
  **指令寄存器IR**---寄存现行指令；
  **指令译码器ID**---解释现行指令，产生相应的控制电位。

   ②时序部件：产生计算机运行所需的时序信号。

   ③微操作信号发生器：产生执行指令的微操作控制信号。

- 程序：有序指令的集合，用来解决某一特定问题。

- 指令：机器完成某种操作的命令，包括操作码和地址码。

  ![1554715671102](1554715671102.png)

##### 2.4 计算机完成一条指令的过程

![1554716804105](1554716804105.png)

![1554716827741](1554716827741.png)

1. 将程序计数器PC中的指令地址送至地址寄存器MAR

2. 根据MAR的地址指定存储器的存储单元

3. 将存储单元中的值送至数据寄存器MDR（在控制器的控制下执行）

4. 将MDR中的指令送至指令寄存器IR

   \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--前四步取址操作\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

   之后PC+1

5. 将IR中的指令操作码送至控制器（CU），分析操作码和地址码

   \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--第五步分析指令操作\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

6. 将IR中的指令地址N送至MAR

7. 根据MAR的地址，指定存储器的存储单元

8. 将累加器ACC中的数据送至MDR（在控制器的控制下执行）

9. 将MDR中的数据送到存储单元N，完成存数操作

 同理：

![1554717478313](1554717478313.png)

##### 2.5 程序运行过程示例

![image-20201228163048181](image-20201228163048181.png)

## 1.3 计算机硬件的主要技术指标

### 1.3.1 机器字长

-   机器字长：CPU一次能处理的数据的位数，通常与CPU中`寄存器位数`有关
-   说明： 字长位数越多，精度越高，运算速度也越快
    字长通常是8的整倍数，使能存放整数个字符的编码。例如字长为8、16、32、64位等

### 1.3.2 存储容量

存放二进制信息的总位数

![image-20201228165017853](image-20201228165017853.png)

### 1.3.3 运算速度

![image-20201228164055751](image-20201228164055751.png)

1. **衡量方法1**：平均运算速度Vm（指令平均执行速度）

   定义：计算机每秒钟执行指令的条数 ​ 单位：MIPS（百万条指令每秒） ​
   求法：先求平均运算时间（平均指令周期）Tm

   ![1554720997109](D:/System/Downloads/计算机组成原理笔记_files/1554720997109.png)

   式中：n：指令的种类；f i：第i种指令出现的频度(%) t
   i：第i种指令的指令周期(秒) 则平均运算速度： Vm＝1 ⁄ Tm

   f:主频

   Tm:平均**指令周期**（跟运算速度有关）

   T:CPU**时钟周期**（跟主频有关）

   T=1/f

   Tm=CPI\*T

   Vm=f\*IPC

2. **衡量方法2**：指令的平均周期数CPI
   定义：计算机执行一条指令所需的时钟周期数 求法：

   ![1554721159486](D:/System/Downloads/计算机组成原理笔记_files/1554721159486.png)

   相关参数：IPC(CPU 每一时钟周期内所执行的指令条数)

   说明：一旦处理器设计完成，IPC值就不会再改变了(逻辑电路完全相同,IPC、CPI相同)

   1/MHZ=μs

   1/MIPS=μs

## 1.4 习题

1.  计算机存储结构的基本单位是 **比特（bit）**，常用单位是
    **字节（Byte）**。

2.  控制器由 **程序计数器（PC存放当前欲执行指令地址）**
    、**指令寄存器（IR存放当前欲执行的指令）**、**控制单元（CU分析当前指令所需要完成的操作）**
    组成; **CU** 负责指令译码，分析操作码和地址码。

3.  **固件**
    具有某种软件功能的硬件，一般用ROM实现（是将一部分软件永恒地存储于只读存储器中）。

4.  常用的辅助存储器有 **磁盘** 和 **磁带** 等。

5.  计算机硬件的主要技术指标包括 **机器字长** 、**存储容量**
    、**运算速度** 。

## 第2章 计算机系统的发展

略

## 第3章 系统总线

### 3.1 总线的概念

1. 为什么要用总线

   使用分散连接几乎无法满足人们增添或撤减设备的需求。

2. 什么是总线？

   总线是**连接多个部件**的**公共信息传输线**，是各个部件**分时、共享**的传输介质。（在任何时刻只能有一对部件使用总线）

3. 总线上信息的传送：

   ![1555918726320](1555918726320.png)

   ![1555918778992](1555918778992.png)

   在某一时刻，只允许有一个部件向总线发送信息，而多个部件可以同时从总线上接收相同的信息。

4.  总线结构的计算机举例

    a\. 面向 CPU 的双总线结构框图

    ![1555919018311](1555919018311.png)

    特点：当I/O设备与主存交换信息时，要占用CPU，CPU运算将会停止，因此会影响CPU工作效率。

    b\. 单总线结构框图

    ![1555919244848](1555919244848.png)

    特点：当I/O设备与主存交换信息时，CPU可以继续处理不访问主存或者I/O设备的操作。因为只有一组总线，当CPU要读取主存中的指令，会发生冲突（总线冲突）。另外，因为只有一根总线，如果设备很多，这条系统总线会比较长，导致两个部件在进行信息交换时，延迟比较长。

    c\. 以存储器为中心的双总线结构框图

    ![1555920755289](1555920755289.png)

    特点：存储总线速度高，只提供CPU与主存之间传输信息，保留了I/O设备与存储器之间交换信息不经过CPU的特点，这样既提供了传输效率，又减轻了系统总线的负担。

### 3.2 总线的分类

### 3.3 总线特性及性能指标

### 3.4 总线结构

### 3.5 总线控制

